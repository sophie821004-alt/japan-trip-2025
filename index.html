<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 日本行 | Japan Trip</title>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f4f4f5; -webkit-tap-highlight-color: transparent; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .card-shadow { box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // 設定參與分帳的人員名單
        const TRAVELERS = ['Sophie', 'Alt', 'Others'];
        // 設定預設匯率 (例如：0.22)
        const DEFAULT_RATE = 0.22;

        // --- DATA SOURCE (包含每小時溫度預報) ---
        const tripData = [
            {
                day: 1, date: "12/20 (Sat)", location: "Nagoya", weather: "sunny", 
                temperature: [8, 10, 12, 14, 13, 11, 9, 8], // 8小時溫度
                temp_hour_range: "10:00 - 18:00",
                events: [
                    { time: "09:00", title: "桃園 (TPE) ✈️ 名古屋 (NGO)", type: "transport", 
                      transport_note: "虎航 IT206 (請自行確認登機時間)", 
                      event_note: "Check-in & 出境 | D1 班機資訊", link: "" },
                    { time: "14:00", title: "抵達名古屋 NGO & 前往飯店", type: "hotel", 
                      suggested_departure: "14:00", 
                      transport_note: "名鐵特急/準急 -> 步行 | 約 40-50 分鐘", 
                      event_note: "VIA INN 名古屋站前椿町 | 入境通關、放行李", link: "https://goo.gl/maps/viainnugoya" },
                    { time: "16:00", title: "大須觀音 (參拜)", type: "sight", 
                      suggested_departure: "15:35", 
                      transport_note: "地鐵東山線/鶴舞線 (轉乘一次) | 約 25-30 分鐘", 
                      event_note: "抓30分鐘參拜時間 | 開放時間06:00-19:00", 
                      nearby_suggestions: ["萬松寺 (有定時噴水表演)", "大須招財貓", "水曜日的愛麗絲 (主題商店)"],
                      link: "https://goo.gl/maps/osukannon" },
                    { time: "17:30", title: "大須商店街 & 晚餐", type: "food", 
                      suggested_departure: "17:20", 
                      transport_note: "步行 | 約 10 分鐘 (從大須觀音主殿前進入)", 
                      event_note: "必吃：矢場豬排 (Miso Katsu) | 多數店家營業至20:00", tags: ["必吃", "逛街"], link: "https://goo.gl/maps/osukannon" },
                    { time: "19:00", title: "榮商圈 (Sakae) 購物", type: "shop", 
                      suggested_departure: "18:40", 
                      transport_note: "步行 | 約 20 分鐘 (矢場順路)", 
                      event_note: "SKYLE (UNIQLO/GU), Alpen Nagoya (~21:00)", 
                      nearby_suggestions: ["中部電力Mirai Tower (名古屋電視塔)", "久屋大通公園"],
                      link: "https://goo.gl/maps/sakae" },
                    { time: "21:00", title: "綠洲21 (Oasis 21) 夜景", type: "sight", 
                      suggested_departure: "20:55", 
                      transport_note: "步行 | 約 5 分鐘 (從榮站)", 
                      event_note: "拍攝夜景", tags: ["拍照"], link: "https://goo.gl/maps/oasis21" },
                    { time: "21:30", title: "千里馬藥局 & 返回飯店", type: "shop", 
                      suggested_departure: "21:15", 
                      transport_note: "地鐵東山線/櫻通線 | 約 15-20 分鐘 (返回名古屋站)", 
                      event_note: "營業至 22:00 (回飯店順路)", link: "https://goo.gl/maps/senrima" }
                ]
            },
            {
                day: 2, date: "12/21 (Sun)", location: "Inuyama/Nagoya", weather: "cloudy", 
                temperature: [7, 8, 9, 11, 13, 12, 10, 9],
                temp_hour_range: "10:00 - 18:00",
                events: [
                    { time: "09:00", title: "犬山城下町 & 三光稻荷神社", type: "sight", 
                      suggested_departure: "08:20", 
                      transport_note: "名鐵犬山線 MuSKY (特急) | 約 40-50 分鐘", 
                      event_note: "飯店早餐 06:30-09:30 | 犬山城下町商店多數約 10:00 營業", 
                      nearby_suggestions: ["戀小町糰子 (網紅甜點)", "飛驒牛握壽司 (犬山牛太郎)", "五平餅 (在地小吃)"],
                      link: "https://goo.gl/maps/inuyamacastle" },
                    { time: "13:00", title: "前往名古屋城", type: "transport", 
                      suggested_departure: "11:50", 
                      transport_note: "名鐵/地鐵 (經上飯田) | 約 1 小時 10 分鐘 (含轉乘)", 
                      event_note: "從犬山站出發", link: "https://goo.gl/maps/nagoyacastle" },
                    { time: "14:30", title: "名古屋城", type: "sight", 
                      suggested_departure: "14:25", 
                      transport_note: "步行 | 約 5 分鐘 (地鐵站出口)", 
                      event_note: "古城文化之旅 | 交通券換入場券?", link: "https://goo.gl/maps/nagoyacastle" },
                    { time: "16:30", title: "名鐵百貨商圈 & BicCamera", type: "shop", 
                      suggested_departure: "16:05", 
                      transport_note: "地鐵名城線/鶴舞線 (轉乘一次) | 約 25 分鐘", 
                      event_note: "JR Gate Tower店/西店 | D1沒吃到矢場可在此吃", link: "https://goo.gl/maps/nagoyastation" }
                ]
            },
            {
                day: 3, date: "12/22 (Mon)", location: "Nagoya -> Fuji", weather: "sunny", 
                temperature: [5, 7, 9, 11, 10, 8, 7, 6],
                temp_hour_range: "09:00 - 17:00",
                events: [
                    { time: "08:30", title: "熱田神宮", type: "sight", 
                      suggested_departure: "08:20", 
                      transport_note: "名鐵 (名古屋站 -> 神宮
